# 数组去重

数组去重是日常开发、面试中经常会遇到的问题。一年前面试有赞，视频写代码，就考了这么一道题。使用es6的数组去重，面试官觉得太讨巧，看不出基本功；自己写写的比较简陋，面试官觉得考虑不够全面，所以当时就华丽丽地跪了。

underscore 中写了 unique 方法来进行去重，学习中发现涉及到的点还是挺多的，顺手总结一下。

## 直觉写法

思路：去除数组中的重复项，那么就需要创建一个新的数组，对原数组进行过滤查找，将不重复的数据放入新数组中，返回。
以上提及的几个词语，对应了2个方法：filter、indexOf

```js
const unique = (arr) => {
  let res = [];
  let len = arr.length;
  for(let i = 0; i < len; i++) {
    if(res.indexOf(arr[i]) === -1) {
        res.push(arr[i])
    }
  }
  return res;
}
var a = [1, 1, 2, 2, '1', '1']
unique(a) // [1, 2, "1"]
```
*没有考虑IE6-IE8不支持indexOf的情况*

## 简化

使用filter可以稍微简化上述代码

```js
const unique = (a) => {
  return a.filter((item, index, arr) => {
      return arr.indexOf(item) === index;
  })
}
var aa = [1, 1, 2, 2, '1', '1']
console.log(unique(aa))
```

## 哈希解法
上面两种情况，数组中都是简单基本类型，没有考虑复杂类型（如对象）。若数组中有对象，对象存储的是引用而非值，则不能使用上述解法。
思路：对象中，键属性是不重复的，因此可以考虑使用哈希表。

```js

```

## es6
虽然面试时这样的写法并没能加分，日常开发中使用还是非常方便的。

```js

```

## underscore 中的 uinque 方法

源码中方法写的比价长，注解如下：

```js

```

另: 附上当年有赞面试官出的那道题目

```
// 数组去重
a = [0, 0, {}, Object.create(null), null, {1: '1'}, {'1': '1'},  NaN, -NaN, , , undefined]
```
